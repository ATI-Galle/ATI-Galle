-- phpMyAdmin SQL Dump
-- version 5.2.1
-- https://www.phpmyadmin.net/
--
-- Host: 127.0.0.1:3306
-- Generation Time: May 11, 2025 at 04:13 AM
-- Server version: 8.2.0
-- PHP Version: 7.4.33

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Database: `ati`
--

-- --------------------------------------------------------

--
-- Table structure for table `albums`
--

DROP TABLE IF EXISTS `albums`;
CREATE TABLE IF NOT EXISTS `albums` (
  `AlbumId` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Unique Album ID, e.g., generated by uniqid("album_")',
  `album_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Name of the album, e.g., "Event XYZ Photos"',
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Timestamp of album creation',
  PRIMARY KEY (`AlbumId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `albums`
--

INSERT INTO `albums` (`AlbumId`, `album_name`, `created_at`) VALUES
('album_681e6a6c37039', 'df Album', '2025-05-09 20:49:48'),
('album_681e6ad4a8a3b', 'df Album', '2025-05-09 20:51:32'),
('album_681e6ae07ef08', 'asda Album', '2025-05-09 20:51:44'),
('album_681e6af3a887a', 'sdsds Album', '2025-05-09 20:52:03');

-- --------------------------------------------------------

--
-- Table structure for table `album_images`
--

DROP TABLE IF EXISTS `album_images`;
CREATE TABLE IF NOT EXISTS `album_images` (
  `image_id` int NOT NULL AUTO_INCREMENT COMMENT 'Auto-incrementing unique ID for each image entry',
  `AlbumId` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Foreign key referencing the album this image belongs to',
  `image_path` varchar(512) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Path to the image file (e.g., uploads/albums/AlbumId/image.jpg)',
  `uploaded_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Timestamp of image upload',
  PRIMARY KEY (`image_id`),
  KEY `idx_albumid_images` (`AlbumId`)
) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `album_images`
--

INSERT INTO `album_images` (`image_id`, `AlbumId`, `image_path`, `uploaded_at`) VALUES
(1, 'album_681e6a6c37039', 'uploads/albums/album_681e6a6c37039/1746823788_681e6a6c3f8eb_495049281_1013588507627610_6395258158987517462_n.jpg', '2025-05-09 20:49:48'),
(2, 'album_681e6a6c37039', 'uploads/albums/album_681e6a6c37039/1746823788_681e6a6c40f80_WhatsApp_Image_2025-05-09_at_11.39.54_e21c18d4.jpg', '2025-05-09 20:49:48'),
(3, 'album_681e6ad4a8a3b', 'uploads/albums/album_681e6ad4a8a3b/1746823892_681e6ad4ab6c7_495049281_1013588507627610_6395258158987517462_n.jpg', '2025-05-09 20:51:32'),
(4, 'album_681e6ad4a8a3b', 'uploads/albums/album_681e6ad4a8a3b/1746823892_681e6ad4ac3d9_WhatsApp_Image_2025-05-09_at_11.39.54_e21c18d4.jpg', '2025-05-09 20:51:32'),
(5, 'album_681e6ae07ef08', 'uploads/albums/album_681e6ae07ef08/1746823904_681e6ae08100b_495049281_1013588507627610_6395258158987517462_n.jpg', '2025-05-09 20:51:44'),
(6, 'album_681e6ae07ef08', 'uploads/albums/album_681e6ae07ef08/1746823904_681e6ae082348_WhatsApp_Image_2025-05-09_at_11.39.54_e21c18d4.jpg', '2025-05-09 20:51:44'),
(7, 'album_681e6af3a887a', 'uploads/albums/album_681e6af3a887a/1746823923_681e6af3aac0a_maisn2.png', '2025-05-09 20:52:03'),
(8, 'album_681e6af3a887a', 'uploads/albums/album_681e6af3a887a/1746823923_681e6af3ac153_469198172_122140904738340212_2403692990171276188_n.jpg', '2025-05-09 20:52:03'),
(9, 'album_681e6af3a887a', 'uploads/albums/album_681e6af3a887a/1746824402_681e6cd2cede5_472330149_122145200666340212_9178588026167254252_n.jpg', '2025-05-09 21:00:02'),
(10, 'album_681e6af3a887a', 'uploads/albums/album_681e6af3a887a/1746824402_681e6cd2cf65b_main-qimg-2320f3ed382540e891b55472ec228d1c.webp', '2025-05-09 21:00:02'),
(11, 'album_681e6af3a887a', 'uploads/albums/album_681e6af3a887a/1746825014_681e6f36497ed_472330149_122145200666340212_9178588026167254252_n.jpg', '2025-05-09 21:10:14'),
(12, 'album_681e6af3a887a', 'uploads/albums/album_681e6af3a887a/1746825014_681e6f364a488_main-qimg-2320f3ed382540e891b55472ec228d1c.webp', '2025-05-09 21:10:14');

-- --------------------------------------------------------

--
-- Table structure for table `course`
--

DROP TABLE IF EXISTS `course`;
CREATE TABLE IF NOT EXISTS `course` (
  `cid` varchar(100) NOT NULL,
  `cname` varchar(255) NOT NULL,
  `ctext` longtext NOT NULL,
  `cimg` varchar(255) NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  `status` int NOT NULL,
  PRIMARY KEY (`cid`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

--
-- Dumping data for table `course`
--

INSERT INTO `course` (`cid`, `cname`, `ctext`, `cimg`, `created_at`, `updated_at`, `status`) VALUES
('HNDIT22', 'sdsd', 'sdsd', 'uploads/courses/1746507839_main2.png', '2025-05-06 10:33:59', '2025-05-06 10:33:59', 1);

-- --------------------------------------------------------

--
-- Table structure for table `events`
--

DROP TABLE IF EXISTS `events`;
CREATE TABLE IF NOT EXISTS `events` (
  `eid` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Event ID, as used in your PHP code (e.g., user-defined or unique string)',
  `etitle` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Event Title',
  `etext` text COLLATE utf8mb4_unicode_ci COMMENT 'Event Description, can store HTML content from TinyMCE',
  `etag` text COLLATE utf8mb4_unicode_ci COMMENT 'SEO Tags, comma-separated or other format',
  `AlbumId` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Foreign key referencing the associated album in the albums table',
  `status` tinyint(1) NOT NULL DEFAULT '1' COMMENT 'Event status: 1 for Active, 0 for Inactive',
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'Timestamp of event creation',
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'Timestamp of last event update',
  PRIMARY KEY (`eid`),
  KEY `idx_albumid` (`AlbumId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `events`
--

INSERT INTO `events` (`eid`, `etitle`, `etext`, `etag`, `AlbumId`, `status`, `created_at`, `updated_at`) VALUES
('1', 'asda', 'asas', 'asa', 'album_681e6ae07ef08', 1, '2025-05-09 20:51:44', '2025-05-09 20:51:44'),
('2', 'sdsds', '', 'sdsdgfdg', 'album_681e6af3a887a', 0, '2025-05-09 20:52:03', '2025-05-09 21:10:14');

-- --------------------------------------------------------

--
-- Table structure for table `news`
--

DROP TABLE IF EXISTS `news`;
CREATE TABLE IF NOT EXISTS `news` (
  `nid` int NOT NULL AUTO_INCREMENT,
  `ntitle` varchar(255) NOT NULL,
  `ntag` text,
  `ntext` text,
  `nimg` varchar(255) DEFAULT NULL,
  `count` int DEFAULT '0',
  `status` tinyint DEFAULT '1',
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`nid`)
) ENGINE=MyISAM AUTO_INCREMENT=8 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

--
-- Dumping data for table `news`
--

INSERT INTO `news` (`nid`, `ntitle`, `ntag`, `ntext`, `nimg`, `count`, `status`, `created_at`, `updated_at`) VALUES
(1, 'sds', 'sds', '', '', 0, 1, '2025-05-09 21:54:11', '2025-05-09 21:54:11'),
(2, 'sds', 'sds', '', '', 0, 1, '2025-05-09 21:54:41', '2025-05-09 21:54:41'),
(4, 'sds', 'sdsd', '<p>sd</p>', 'uploads/news_images/1746827903_681e7a7fb2b52_WhatsApp_Image_2025-05-09_at_11.39.54_e21c18d4.jpg', 0, 1, '2025-05-09 21:58:10', '2025-05-09 21:58:23'),
(5, 'asasasa', 'asasa', '<p>asasasas</p>', 'uploads/news_images/1746827926_681e7a96eadec_7.jpg', 0, 1, '2025-05-09 21:58:46', '2025-05-09 21:58:46'),
(6, 'asasasa', 'asasa', '<p>asasasas</p>', 'uploads/news_images/1746827952_681e7ab0908bb_7.jpg', 0, 1, '2025-05-09 21:59:12', '2025-05-09 21:59:12'),
(7, 'sdsd', 'sdsd', '<p>sdsd</p>', 'uploads/news_images/1746828004_681e7ae4403c1_grama_niladhari.png', 0, 1, '2025-05-09 22:00:04', '2025-05-09 22:00:04');

-- --------------------------------------------------------

--
-- Table structure for table `notifications`
--

DROP TABLE IF EXISTS `notifications`;
CREATE TABLE IF NOT EXISTS `notifications` (
  `id` int NOT NULL AUTO_INCREMENT,
  `item_type` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'e.g., Slider, News, Event, Course, Announcement',
  `item_id` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'The ID from the respective table (sid, nid, eid, cid, announcement_id)',
  `item_title` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Title or name of the item for easier display',
  `action` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'e.g., activated, deactivated',
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'When the notification was created',
  `is_read` tinyint(1) DEFAULT '0' COMMENT 'Whether the notification has been viewed/marked as read (optional)',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `password_resets`
--

DROP TABLE IF EXISTS `password_resets`;
CREATE TABLE IF NOT EXISTS `password_resets` (
  `id` int NOT NULL,
  `user_id` int NOT NULL,
  `token` varchar(255) COLLATE utf8mb4_general_ci NOT NULL,
  `expires_at` datetime NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- --------------------------------------------------------

--
-- Table structure for table `slider`
--

DROP TABLE IF EXISTS `slider`;
CREATE TABLE IF NOT EXISTS `slider` (
  `sid` int NOT NULL AUTO_INCREMENT,
  `stitle` varchar(255) NOT NULL,
  `stext` longtext NOT NULL,
  `simg` varchar(255) NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  `status` int NOT NULL,
  PRIMARY KEY (`sid`)
) ENGINE=MyISAM AUTO_INCREMENT=6 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

--
-- Dumping data for table `slider`
--

INSERT INTO `slider` (`sid`, `stitle`, `stext`, `simg`, `created_at`, `updated_at`, `status`) VALUES
(1, 'ssdd', '<p><strong><span data-huuid=\"5263834898667689665\">HHK is an acronym that can refer to a few different things, including&nbsp;<mark>Household Kerosene</mark>&nbsp;(HHK),&nbsp;</span></strong></p>', 'uploads/sliders/1746936223_360_F_85631184_nn8CvFT4qgIMOcp5ygFHFbO9y2kOTfq7.jpg', '2025-05-06 01:09:28', '2025-05-11 09:34:20', 1),
(2, 'sdsd', '<p>sds</p>', 'uploads/sliders/1746936542_Cb5MxgeWIAA5_dw.jpeg', '2025-05-06 01:38:37', '2025-05-11 09:39:02', 1),
(3, 'sdsd', '<p>sdsd&nbsp;</p>\r\n<p>sd</p>\r\n<ol>\r\n<li>d</li>\r\n</ol>', 'uploads/sliders/1746936529_360_F_288280107_bmTxS166WBTOrzoN0F3hsC3cliPa3QhU-removebg-preview.png', '2025-05-06 01:39:23', '2025-05-11 09:38:49', 1),
(5, 'Test Title 1', '<p><em>Test Title By</em> <strong>Vihanga Manodhya</strong></p>', 'uploads/sliders/1746907135_shiwan2.jpg', '2025-05-06 02:24:43', '2025-05-11 01:30:26', 1),
(4, 'gffgf', '', 'uploads/sliders/1746936203_Hiyare-Reservoir-Rainforest_1920x700.jpg', '2025-05-06 02:18:48', '2025-05-11 09:33:23', 1);

-- --------------------------------------------------------

--
-- Table structure for table `staff`
--

DROP TABLE IF EXISTS `staff`;
CREATE TABLE IF NOT EXISTS `staff` (
  `stid` int NOT NULL AUTO_INCREMENT,
  `sname` varchar(255) NOT NULL,
  `spos` varchar(255) NOT NULL,
  `sed` varchar(255) NOT NULL,
  `status` int NOT NULL,
  `created_at` datetime NOT NULL,
  `stimg` varchar(255) NOT NULL,
  `updated_at` datetime NOT NULL,
  PRIMARY KEY (`stid`)
) ENGINE=MyISAM AUTO_INCREMENT=33 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

--
-- Dumping data for table `staff`
--

INSERT INTO `staff` (`stid`, `sname`, `spos`, `sed`, `status`, `created_at`, `stimg`, `updated_at`) VALUES
(3, 'asasas', 'Lecturer', 'asasas', 1, '2025-05-05 06:52:48', 'uploads/staff/1746906078_dr_anil-jasinghe-1.jpg', '2025-05-11 01:11:18'),
(12, 'wew', 'Director', 'asasas', 1, '2025-05-07 17:00:49', 'uploads/staff/1746617449_main2.png', '2025-05-11 01:10:38'),
(32, 'Vihanga', 'Dean', 'asasa', 1, '2025-05-11 01:10:26', 'uploads/staff/1746906026_472745161_1242913236776931_4955227281785020762_n.jpg', '2025-05-11 01:10:26');

-- --------------------------------------------------------

--
-- Table structure for table `university_announcements`
--

DROP TABLE IF EXISTS `university_announcements`;
CREATE TABLE IF NOT EXISTS `university_announcements` (
  `announcement_id` varchar(125) NOT NULL,
  `title` varchar(255) NOT NULL,
  `content` text NOT NULL,
  `image_path` varchar(255) DEFAULT NULL,
  `target_audience` varchar(100) DEFAULT 'all',
  `priority` int DEFAULT '0',
  `publish_datetime` datetime DEFAULT NULL,
  `expiry_datetime` datetime DEFAULT NULL,
  `status` int NOT NULL DEFAULT '0',
  `view_count` int DEFAULT '0',
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`announcement_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

--
-- Dumping data for table `university_announcements`
--

INSERT INTO `university_announcements` (`announcement_id`, `title`, `content`, `image_path`, `target_audience`, `priority`, `publish_datetime`, `expiry_datetime`, `status`, `view_count`, `created_at`, `updated_at`) VALUES
('ANNc001', 'anouncement 1', '<p>asas&nbsp; &nbsp;<strong>special announcement</strong></p>', 'uploads/announcement_images/1746828714_681e7daada9c8_Cb5MxgeWIAA5_dw.jpeg', 'students', 1, '2025-05-07 03:41:00', '2025-05-31 03:41:00', 0, 0, '2025-05-09 22:11:54', '2025-05-09 22:11:54');

-- --------------------------------------------------------

--
-- Table structure for table `users`
--

DROP TABLE IF EXISTS `users`;
CREATE TABLE IF NOT EXISTS `users` (
  `id` int NOT NULL AUTO_INCREMENT,
  `username` varchar(50) NOT NULL,
  `password` varchar(255) NOT NULL,
  `profile_image` varchar(255) DEFAULT NULL,
  `pet_name_hint` varchar(100) DEFAULT NULL,
  `childhood_nickname_hint` varchar(100) DEFAULT NULL,
  `created_at` datetime DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`)
) ENGINE=MyISAM AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

--
-- Dumping data for table `users`
--

INSERT INTO `users` (`id`, `username`, `password`, `profile_image`, `pet_name_hint`, `childhood_nickname_hint`, `created_at`) VALUES
(1, 'mano', '$2y$10$qdNL3J/F2d4La0lAiwE28.Qy.j5igG9SfecqPmyFX0UzINB3w2A1C', 'uploads/profile_images/user_681f340a5b08d5.10968859.jpg', 'priyantha', 'batta', '2025-05-10 16:40:02'),
(2, 'rane', '$2y$10$7QIdOlKBQE9edDxHY4KOveUHxInlHjHNNpi1/tRY7vN8bfUZheEdm', 'uploads/profile_images/user_681f38fb739d61.56117676.jpg', 'priyantha', 'batta', '2025-05-10 17:01:07');

--
-- Constraints for dumped tables
--

--
-- Constraints for table `album_images`
--
ALTER TABLE `album_images`
  ADD CONSTRAINT `fk_albumimage_album` FOREIGN KEY (`AlbumId`) REFERENCES `albums` (`AlbumId`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Constraints for table `events`
--
ALTER TABLE `events`
  ADD CONSTRAINT `fk_event_album` FOREIGN KEY (`AlbumId`) REFERENCES `albums` (`AlbumId`) ON DELETE SET NULL ON UPDATE CASCADE;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
